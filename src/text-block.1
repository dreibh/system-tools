.\"         ____            _                     _____           _
.\"        / ___| _   _ ___| |_ ___ _ __ ___     |_   _|__   ___ | |___
.\"        \___ \| | | / __| __/ _ \ '_ ` _ \ _____| |/ _ \ / _ \| / __|
.\"         ___) | |_| \__ \ ||  __/ | | | | |_____| | (_) | (_) | \__ \
.\"        |____/ \__, |___/\__\___|_| |_| |_|     |_|\___/ \___/|_|___/
.\"               |___/
.\"                             --- System-Tools ---
.\"                  https://www.nntb.no/~dreibh/system-tools/
.\" ==========================================================================
.\"
.\" Text-Block
.\" Copyright (C) 2024-2025 by Thomas Dreibholz
.\"
.\" This program is free software: you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation, either version 3 of the License, or
.\" (at your option) any later version.
.\"
.\" This program is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program.  If not, see <http://www.gnu.org/licenses/>.
.\"
.\" Contact: thomas.dreibholz@gmail.com
.\"
.\" -------------------------------------------------------------------------
.\" Manpage syntax help:
.\" * https://man.freebsd.org/cgi/man.cgi?mdoc(7)
.\" * https://freebsdfoundation.org/wp-content/uploads/2019/03/Writing-Manual-Pages.pdf
.\" * https://forums.freebsd.org/threads/howto-create-a-manpage-from-scratch.13200/
.\" * man mandoc_char
.\" -------------------------------------------------------------------------
.\"
.\" ###### Setup ############################################################
.Dd April 5, 2025
.Dt text-block 1
.Os text-block
.\" ###### Name #############################################################
.Sh NAME
.Nm text-block
.Nd reads text from standard input or given file, and writes it to standard output or a given file. On the text, various modifications can be applied, according to the operation mode: Cat (copy the input text), Enumerate (add line numbers), Highlight (visually highlight text block between markers), Insert (insert text at front/back of marked blocks), Delete (remove text between markers), Replace (replace text of marked blocks).
.\" ###### Synopsis #########################################################
.Sh SYNOPSIS
.Nm text-block
.Op Fl H | Fl Fl highlight
.Op OPTIONS
.Nm text-block
.Op Fl E | Fl Fl enumerate
.Op OPTIONS
.Nm text-block
.Op Fl X | Fl Fl extract
.Op OPTIONS
.Nm text-block
.Op Fl D | Fl Fl delete | Fl Fl remove
.Op OPTIONS
.Nm text-block
.Op Fl F Ar insert_file | Fl Fl insert-front Ar insert_file
.Op OPTIONS
.Nm text-block
.Op Fl B Ar insert_file | Fl Fl insert-back Ar insert_file
.Op OPTIONS
.Nm text-block
.Op Fl R Ar insert_file | Fl Fl replace Ar insert_file
.Op OPTIONS
.Nm text-block
.Op Fl i Ar input_file | Fl Fl input Ar input_file
.Op OPTIONS
.Nm text-block
.Op Fl i Ar output_file | Fl Fl output Ar output_file
.Op OPTIONS
.Nm text-block
.Op Fl h | Fl Fl help
.Nm text-block
.Op Fl v | Fl Fl version
.Pp
.Nm OPTIONS:
.Op Fl b Ar begin_tag | Fl Fl begin-tag Ar begin_tag
.Op Fl e Ar end_tag | Fl Fl end-tag Ar end_tag
.Op Fl -i | Fl Fl input input_file
.Op Fl -o | Fl Fl output output_file
.Op Fl -a | Fl Fl append
.Op Fl -b | Fl Fl begin-tag begin_tag
.Op Fl -e | Fl Fl end-tag end_tag
.Op Fl -y | Fl Fl include-tags
.Op Fl -x | Fl Fl exclude-tags
.Op Fl -f | Fl Fl full-tag-lines
.Op Fl -t | Fl Fl tags-only
.Op Fl -w | Fl Fl suppress-warnings
.Op Fl enumerate-format format
.Op Fl enumerate-label1 string
.Op Fl enumerate-label2 string
.Op Fl Fl highlight-begin string
.Op Fl Fl highlight-end string
.Op Fl Fl highlight-unmarked1 string
.Op Fl Fl highlight-unmarked2 string
.Op Fl Fl highlight-marked1 string
.Op Fl Fl highlight-marked2 string
.\" ###### Description ######################################################
.Sh DESCRIPTION
.Nm text-block
.Nd reads text from standard input or given file, and writes it to standard output or a given file. On the text, various modifications can be applied, according to the operation mode:
.Bl -bullet
.It
Cat: copy the input text as-is.
.It
Enumerate: add line numbers. The format of the enumeration is configurable.
.It
Highlight: visually highlight text block between markers. The format of the marking is configurable, e.g. to apply ANSI colouring, etc.
.It
Delete: remove text between markers.
.It
Insert: insert text from a file at front/back of marked blocks.
.It
Replace: replace text of marked blocks by text from a file.
.El
.Pp
The marking used for the operation modes is based on configurable begin and end tags, e.g. <BEGIN-OF-BLOCK> and <END-OF-BLOCK>, or BEGIN and END. The handling of tags is configurable:
.Bl -bullet
.It
tags-only: Only the text between the marker tags belongs to a block. That is, multiple blocks can appear on the same line. This is the default.
.It
full-tag-lines: A marker includes the full line of is begin and end tags.
.El
Furthermore, the handling of begin/end tags is configurable as well:
.Bl -bullet
.It
exclude-tags: Marked text does not include the begin/end tags. This is the default.
.It
include-tags: Marked text includes the begin/end tags.
.El
.Pp
.\" ###### Arguments ########################################################
.Sh ARGUMENTS
The following options are available:
.Bl -tag -width indent

.It TBD!

.El
.\" ###### Examples #########################################################
.Sh EXAMPLES
.Bl -tag -width indent
.It text-block TBD!
TBD!

.It cat text-block.c | text-block -E --enumerate-format \[dq]6\[dq] --enumerate-label1 $\[aq]\ex1b[37m<\[aq] --enumerate-label2 $\[aq]>\ex1b[0m \[aq]

.El
